<header class="formulario-auth__header">
  <picture class="formulario-auth__logo">
    <source media="(max-width: 480px)" srcset="assets/logo-small.webp">
    <source media="(max-width: 768px)" srcset="assets/logo-medium.webp">
    <img src="assets/logo-large.webp" alt="Logo de Gymunity - Iniciar sesión" loading="eager" width="180" height="40" fetchpriority="high" decoding="async">
  </picture>
  <p class="formulario-auth__tagline">Tu comunidad fitness te espera</p>
</header>

<form class="formulario-auth" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <fieldset class="formulario-auth__fieldset">
    <legend class="formulario-auth__legend">Bienvenido de nuevo</legend>

    @if (errorServidor()) {
      <p class="formulario-auth__error-servidor" role="alert" aria-live="assertive">{{ errorServidor() }}</p>
    }
    
    <app-campo-formulario
      label="Email o nombre de usuario"
      type="text"
      placeholder="tu@email.com o tu_usuario"
      inputId="login-identifier"
      name="identifier"
      [formControl]="identifierControl"
      [required]="true"
      [hasError]="identifierControl.touched && identifierControl.invalid"
      [errorMessage]="getErrorMessage('identifier')">
    </app-campo-formulario>
    
    <app-campo-formulario
      label="Contraseña"
      type="password"
      placeholder="••••••••"
      inputId="login-password"
      name="password"
      [formControl]="passwordControl"
      [required]="true"
      [hasError]="passwordControl.touched && passwordControl.invalid"
      [errorMessage]="getErrorMessage('password')">
    </app-campo-formulario>

    <div class="formulario-login__recordar">
      <input 
        type="checkbox" 
        id="recordar-usuario"
        class="formulario-login__recordar-checkbox"
        [checked]="recordarUsuario()"
        (change)="toggleRecordar()">
      <label for="recordar-usuario" class="formulario-login__recordar-texto">Recordar mis datos para iniciar sesión automáticamente</label>
    </div>
    
    <section class="formulario-auth__submit">
      <app-boton tipo="submit" [disabled]="loginForm.invalid && loginForm.touched" [cargando]="cargando()">
        Entrar al gimnasio
      </app-boton>
    </section>

    <footer class="formulario-auth__footer">
      <p class="formulario-auth__alt">
        ¿Nuevo en Gymunity? 
        <button 
          type="button" 
          class="formulario-auth__link" 
          (click)="irRegistro.emit()"
          aria-label="Crear una cuenta nueva en Gymunity">
          Únete ahora
        </button>
      </p>
    </footer>
  </fieldset>
</form>
