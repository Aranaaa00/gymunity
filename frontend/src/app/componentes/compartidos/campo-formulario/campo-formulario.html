<label class="campo-formulario__label" [for]="inputId()">
  {{ label() }}
  @if (required()) {
    <abbr class="campo-formulario__required" title="Campo obligatorio">*</abbr>
  }
</label>

@if (formControl()) {
  <input 
    class="campo-formulario__field"
    [class.campo-formulario__field--error]="hasError()"
    [class.campo-formulario__field--validando]="validando()"
    [class.campo-formulario__field--exito]="mensajeExito() && !hasError() && !validando()"
    [type]="type()"
    [id]="inputId()"
    [name]="name()"
    [placeholder]="placeholder()"
    [formControl]="formControl()!"
    [attr.aria-describedby]="helpText() ? inputId() + '-help' : (hasError() ? inputId() + '-error' : null)"
    [attr.aria-invalid]="hasError()"
  />
} @else {
  <input 
    class="campo-formulario__field"
    [class.campo-formulario__field--error]="hasError()"
    [class.campo-formulario__field--validando]="validando()"
    [class.campo-formulario__field--exito]="mensajeExito() && !hasError() && !validando()"
    [type]="type()"
    [id]="inputId()"
    [name]="name()"
    [placeholder]="placeholder()"
    [required]="required()"
    [disabled]="disabled()"
    [value]="value()"
    [attr.aria-describedby]="helpText() ? inputId() + '-help' : (hasError() ? inputId() + '-error' : null)"
    [attr.aria-invalid]="hasError()"
    (input)="onInput($event)"
    (blur)="onBlur()"
  />
}

<aside class="campo-formulario__mensaje-container">
  @if (validando()) {
    <small class="campo-formulario__validando" role="status">Verificando...</small>
  } @else if (hasError() && errorMessage()) {
    <small class="campo-formulario__error" [id]="inputId() + '-error'" role="alert">{{ errorMessage() }}</small>
  } @else if (mensajeExito()) {
    <small class="campo-formulario__exito" role="status">{{ mensajeExito() }}</small>
  } @else if (helpText()) {
    <small class="campo-formulario__help" [id]="inputId() + '-help'">{{ helpText() }}</small>
  }
</aside>
