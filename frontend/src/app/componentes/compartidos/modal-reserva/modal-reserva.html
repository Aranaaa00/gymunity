<aside 
  class="modal-reserva" 
  role="dialog" 
  aria-modal="true"
  aria-labelledby="modal-titulo"
  (click)="onBackdropClick($event)"
>
  <article class="modal-reserva__contenido">
    <header class="modal-reserva__header">
      <h2 id="modal-titulo" class="modal-reserva__titulo">¿Reservar esta clase?</h2>
    </header>

    <section class="modal-reserva__cuerpo">
      <p class="modal-reserva__clase">
        {{ claseNombre() }}
        @if (profesorNombre()) {
          <span class="modal-reserva__profesor">con {{ profesorNombre() }}</span>
        }
      </p>

      @if (horarioTexto()) {
        <p class="modal-reserva__horario">
          <app-icono nombre="clock" tamano="sm" />
          {{ horarioTexto() }}
        </p>
      }

      <p class="modal-reserva__fecha-proxima">
        <app-icono nombre="calendar" tamano="sm" />
        <span>Próxima clase: <strong>{{ proximaFechaLabel() }}</strong></span>
      </p>

      <p class="modal-reserva__info">
        Usarás 1 de tus clases disponibles · Te quedarán {{ creditosDespuesReserva() }}
      </p>
    </section>

    <footer class="modal-reserva__acciones">
      <button 
        type="button" 
        class="modal-reserva__boton modal-reserva__boton--secundario"
        [attr.aria-label]="'Cancelar reserva de ' + claseNombre()"
        (click)="onCancelar()"
        [disabled]="procesando()"
      >
        Cancelar
      </button>
      <button 
        type="button" 
        class="modal-reserva__boton modal-reserva__boton--primario"
        [attr.aria-label]="procesando() ? 'Procesando reserva de ' + claseNombre() : 'Confirmar reserva de ' + claseNombre() + (profesorNombre() ? ' con ' + profesorNombre() : '')"
        (click)="onConfirmar()"
        [disabled]="procesando()"
      >
        @if (procesando()) {
          <app-icono nombre="loader" tamano="sm" class="modal-reserva__spinner" />
          Reservando...
        } @else {
          Reservar
        }
      </button>
    </footer>
  </article>
</aside>
