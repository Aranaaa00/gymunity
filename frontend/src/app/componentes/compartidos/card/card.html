<article 
  class="card" 
  [class]="variantClass()"
  [class.card--clickable]="!!id()"
  [attr.tabindex]="id() ? 0 : null"
  [attr.role]="id() ? 'link' : null"
  [attr.aria-label]="id() ? 'Ver detalles de ' + title() + (location() ? ' en ' + location() : '') + (tieneValoracion() ? ', valoración ' + valoracionFormateada() : '') : null"
  (click)="navegarAGimnasio()"
  (keydown.enter)="navegarAGimnasio()"
  (keydown.space)="navegarAGimnasio(); $event.preventDefault()">
  @if (imageSrc()) {
    <app-card-image
      [src]="imageSrc()"
      [alt]="imageAlt() || 'Foto del gimnasio ' + title() + (location() ? ' en ' + location() : '')"
      size="md"
      [variant]="variant()"
      [priority]="priority()"
    />
  }
  <section class="card__body">
    <header class="card__header">
      <h3 class="card__title">{{ title() }}</h3>
      @if (subtitle()) {
        <p class="card__subtitle">{{ subtitle() }}</p>
      }
      @if (location()) {
        <p class="card__location">{{ location() }}</p>
      }
      @if (tieneValoracion()) {
        <span class="card__rating card__rating--con-estrella">
          <lucide-icon name="star" [size]="14" />
          {{ valoracionFormateada() }}
        </span>
      } @else if (valoracion() === null && !rating()) {
        <span class="card__rating card__rating--sin-valoracion">
          Aún sin valoraciones
        </span>
      } @else if (rating()) {
        <span class="card__rating">{{ rating() }}</span>
      }
    </header>
  </section>
  @if (variant() === 'horizontal') {
    <footer class="card__footer">
      <app-boton variante="ghost" tamanio="sm" [ariaLabel]="'Ver más información sobre ' + title()">Ver más</app-boton>
    </footer>
  }
  @if (actionText() && variant() !== 'horizontal') {
    <footer class="card__footer">
      <button class="card__action" [attr.aria-label]="actionText() + ' en ' + title()">{{ actionText() }}</button>
    </footer>
  }
</article>
