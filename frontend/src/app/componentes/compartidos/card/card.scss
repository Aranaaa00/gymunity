@use '../../../../styles/00-settings/variables' as *;
@use '../../../../styles/01-tools/mixins' as *;

// ============================================
// VARIABLES LOCALES
// ============================================

$card-transition: 0.25s ease;
$card-vertical-max: 18rem;
$card-horizontal-height: 5.5rem;
$card-container-bp: 20rem;

// ============================================
// CARD - Componente de tarjeta reutilizable
// ============================================

.card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: $space-1;
  width: 100%;
  font-family: $fuente-principal;
  color: var(--color-texto);
  transition: transform $card-transition;

  // ----------------------------------------
  // Container (para container queries)
  // ----------------------------------------

  &-container {
    container-type: inline-size;
    container-name: card;
    width: 100%;
  }

  // ----------------------------------------
  // Modificadores de comportamiento
  // ----------------------------------------

  &--clickable {
    cursor: pointer;

    &:hover {
      transform: translateY(-0.125rem);

      .card__image-wrapper {
        box-shadow: 0 0.5rem 1.5rem rgba($color-botones, 0.2);
      }
    }

    &:focus-visible {
      outline: $borde-medium solid var(--color-boton);
      outline-offset: $borde-medium;
      border-radius: $radio-lg;
    }

    &:active {
      transform: translateY(0);
    }
  }

  // ----------------------------------------
  // Modificadores de layout
  // ----------------------------------------

  &--vertical {
    max-width: $card-vertical-max;
  }

  &--horizontal {
    flex-direction: row;
    align-items: center;
    gap: $space-2;
    height: $card-horizontal-height;
    max-width: none;
    padding: $space-2;
    background: var(--color-fondo-secundario);
    border: $borde-thin solid var(--color-borde);
    border-radius: $radio-md;
    transition:
      background-color $transicion-tema,
      border-color $card-transition,
      box-shadow $card-transition;

    &:hover {
      border-color: var(--color-boton);
      box-shadow: 0 0.25rem 1rem rgba($color-botones, 0.12);
    }

    .card__body {
      flex: 1;
      gap: 0.125rem;
      padding: 0;
      min-width: 0;
    }

    .card__title {
      font-size: $texto-sm;
    }

    .card__subtitle {
      font-size: $texto-xs;
    }

    .card__rating {
      margin-top: 0.25rem;
      font-size: $texto-xs;
    }

    .card__footer {
      flex-shrink: 0;
      margin: 0;
    }
  }

  &--adaptive {
    flex-direction: row;
    align-items: center;
    gap: $space-2;
    height: auto;
    min-height: $card-horizontal-height;
    max-width: none;
    padding: $space-2;
    background: var(--color-fondo-secundario);
    border: $borde-thin solid var(--color-borde);
    border-radius: $radio-md;
    transition:
      background-color $transicion-tema,
      border-color $card-transition,
      box-shadow $card-transition;

    &:hover {
      border-color: var(--color-boton);
      box-shadow: 0 0.25rem 1rem rgba($color-botones, 0.12);
    }

    .card__body {
      flex: 1;
      gap: 0.125rem;
      padding: 0;
      min-width: 0;
    }

    .card__title {
      font-size: $texto-sm;
    }

    .card__subtitle {
      font-size: $texto-xs;
    }

    .card__rating {
      margin-top: 0.25rem;
      font-size: $texto-xs;
    }

    .card__footer {
      flex-shrink: 0;
      margin: 0;
    }
  }

  // ----------------------------------------
  // Elementos
  // ----------------------------------------

  &__body {
    display: flex;
    flex-direction: column;
    flex: 1;
    gap: $space-1;
    padding-top: $space-1;
  }

  &__header {
    display: flex;
    flex-direction: column;
  }

  &__title {
    margin: 0;
    overflow: hidden;
    font-size: $texto-s;
    font-weight: $font-weight-bold;
    line-height: $line-height-tight;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: var(--color-texto);
  }

  &__subtitle {
    margin: 0;
    overflow: hidden;
    font-size: $texto-xs;
    font-weight: $font-weight-regular;
    line-height: $line-height-normal;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: var(--color-subtitulo);
  }

  &__location {
    margin: 0;
    overflow: hidden;
    font-size: $texto-xs;
    font-weight: $font-weight-regular;
    font-style: italic;
    line-height: $line-height-normal;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: var(--color-subtitulo);
  }

  &__rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    margin-top: $space-1;
    font-size: $texto-xs;
    font-weight: $font-weight-semibold;
    color: var(--color-texto);

    &--con-estrella lucide-icon {
      color: var(--color-estrella);
    }

    &--sin-valoracion {
      font-weight: $font-weight-regular;
      font-style: italic;
      color: var(--color-subtitulo);
    }
  }

  &__footer {
    display: flex;
    justify-content: flex-end;
    margin-top: auto;
  }

  &__image-wrapper {
    transition: box-shadow $card-transition;
  }
}

// ----------------------------------------
// Container Query para modo adaptativo
// ----------------------------------------

@container card (max-width: #{$card-container-bp}) {
  .card--adaptive {
    flex-direction: column;
    align-items: stretch;
    gap: $space-1;
    height: auto;
    min-height: auto;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
    box-shadow: none;

    &:hover {
      border-color: transparent;
      box-shadow: none;
    }

    .card__body {
      padding-top: $space-1;
    }

    .card__title {
      font-size: $texto-s;
    }

    .card__rating {
      margin-top: $space-1;
    }

    .card__footer {
      justify-content: flex-end;
      margin-top: auto;
    }
  }
}
